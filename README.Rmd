---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```

# nhstt

<!-- badges: start -->
[![R-CMD-check](https://github.com/bennettoxford/nhstt/actions/workflows/R-CMD-check.yaml/badge.svg)](https://github.com/bennettoxford/nhstt/actions/workflows/R-CMD-check.yaml)
<!-- badges: end -->

> **This package is under active development. Breaking changes are likely.**

`nhstt` provides access to publicly available NHS Talking Therapies reports in a tidy data format.

## Installation

Install the development version from GitHub:

``` r
# install.packages("pak")
pak::pak("bennettoxford/nhstt")
```

## Usage

```{r example, eval = FALSE}
library(nhstt)

# Download and process data (run once)
nhstt_setup()

# See R package info and avialable datasets
nhstt_info()

# Load a dataset
key_measures
```

## Available NHS Talking Therapies reports

### Annual reports

All annual reports are available from `r format(min(nhstt::key_measures$start_date), "%B %Y")` to
`r format(max(nhstt::key_measures$end_date), "%B %Y")` (`r length(unique(nhstt::key_measures$period))` annual periods).

```{r datasets-table, echo = FALSE, message = FALSE}
configs <- nhstt:::get_dataset_configs()

datasets_df <- data.frame(
  Dataset = paste0("`", names(configs), "`"),
  Description = sapply(configs, function(x) x$description),
  Version = sapply(configs, function(x) x$version)
)

knitr::kable(
  datasets_df,
  row.names = FALSE,
  col.names = c(
    "Dataset",
    "Description",
    "Version"
  ),
  align = c("l", "l", "r")
)
```
