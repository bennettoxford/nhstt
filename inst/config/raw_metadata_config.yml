# NHS Talking Therapies raw metadata configuration
archives:
  # Annual metadata files (contain multiple sheets)
  annual_metadata:
    - period: "2024-25"
      url: "https://files.digital.nhs.uk/BE/AAF6D0/psych-ther-ann-2024-25-meta.xlsx"
      format: "xlsx"

datasets:
  # Annual metadata
  metadata_measures_main_annual:
    title: "Annual metadata - data measures (main)"
    description: "Field definitions for key measures dataset"
    version: "0.1.0"
    get_function: "get_metadata_measures_annual"
    frequency: "annual"
    type: "metadata"
    copyright: "Copyright NHS England"
    license: "OGL-UK-3.0"
    archive: "annual_metadata"
    sources:
      - period: "2024-25"
        sheet: "Data measures (main)"
        range: "A10:D57"

  metadata_measures_additional_annual:
    title: "Annual metadata - data measures (additional)"
    description: "Field definitions for additional annual CSVs"
    version: "0.1.0"
    get_function: "get_metadata_measures_annual"
    frequency: "annual"
    type: "metadata"
    copyright: "Copyright NHS England"
    license: "OGL-UK-3.0"
    archive: "annual_metadata"
    sources:
      - period: "2024-25"
        sheet: "Data measures (additional)"
        range: "A10:E137"

  metadata_variables_main_annual:
    title: "Annual metadata - variables (main)"
    description: "Variable derivations for key measures dataset"
    version: "0.1.0"
    get_function: "get_metadata_variables_annual"
    frequency: "annual"
    type: "metadata"
    copyright: "Copyright NHS England"
    license: "OGL-UK-3.0"
    archive: "annual_metadata"
    sources:
      - period: "2024-25"
        sheet: "Variables (main)"
        range: "A10:G271"

  metadata_variables_additional_annual:
    title: "Annual metadata - variables (additional)"
    description: "Variable derivations for additional annual CSVs"
    version: "0.1.0"
    get_function: "get_metadata_variables_annual"
    frequency: "annual"
    type: "metadata"
    copyright: "Copyright NHS England"
    license: "OGL-UK-3.0"
    archive: "annual_metadata"
    sources:
      - period: "2024-25"
        sheet: "Variables (additional)"
        range: "A10:H308"

  # Monthly metadata
  metadata_measures_monthly:
    title: "Monthly metadata"
    description: "Measure definitions, derivations, and construction details"
    version: "0.1.0"
    get_function: "get_metadata_monthly"
    frequency: "monthly"
    type: "metadata"
    copyright: "Copyright NHS England"
    license: "OGL-UK-3.0"
    sources:
      - period: "2025-07"
        url: "https://digital.nhs.uk/binaries/content/assets/website-assets/data-and-information/datasets/nhs-talking-therapies/reports/nhstalkingtherapies-monthly-metadata-20250710.xlsx"
        format: "xlsx"
        sheet: "Measures"
        range: "A5:H427"

  metadata_providers:
    title: "Provider organisation metadata"
    description: "NHS TT provider metadata from Organisation Data Service (ODS)"
    version: "0.1.0"
    get_function: "get_metadata_providers"
    frequency: "live"
    type: "metadata"
    copyright: "Copyright NHS England"
    license: "OGL-UK-3.0"
    sources:
      - period: "current"
        url: "https://directory.spineservices.nhs.uk/ORD/2-0-0/organisations"
        format: "api"
