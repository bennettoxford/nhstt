# nhstt

> **This package is under active development. Breaking changes are
> likely.**

`nhstt` provides access to publicly available NHS Talking Therapies
reports in a tidy data format.

## Installation

Install the development version from GitHub:

``` r
# install.packages("pak")
pak::pak("bennettoxford/nhstt")
```

## Usage

``` r
library(nhstt)

# Load annual key measures dataset for financial year 2024-25
km_annual <- get_key_measures_annual(periods = "2024-25")

# Load all monthly activity performance datasets
# Note, this will take a few minutes
ap_monthly <- get_activity_performance_monthly()
```

## Available NHS Talking Therapies data

### Annual data

| Function                                                                                                  | First period | Last period | Count periods | Version |
|:----------------------------------------------------------------------------------------------------------|:-------------|:------------|--------------:|--------:|
| [`get_key_measures_annual()`](https://bennettoxford.github.io/nhstt/reference/get_key_measures_annual.md) | 2017-18      | 2024-25     |             8 |   0.2.0 |
| [`get_proms_annual()`](https://bennettoxford.github.io/nhstt/reference/get_proms_annual.md)               | 2022-23      | 2024-25     |             3 |   0.1.0 |

### Monthly data

| Function                                                                                                                    | First period | Last period | Count periods | Version |
|:----------------------------------------------------------------------------------------------------------------------------|:-------------|:------------|--------------:|--------:|
| [`get_activity_performance_monthly()`](https://bennettoxford.github.io/nhstt/reference/get_activity_performance_monthly.md) | 2023-05      | 2025-09     |            29 |   0.2.0 |

### Metadata

| Function                                                                                                              | First period | Last period | Count periods | Version |
|:----------------------------------------------------------------------------------------------------------------------|:-------------|:------------|--------------:|--------:|
| [`get_metadata_measures_annual()`](https://bennettoxford.github.io/nhstt/reference/get_metadata_measures_annual.md)   | 2024-25      | 2024-25     |             1 |   0.1.0 |
| [`get_metadata_variables_annual()`](https://bennettoxford.github.io/nhstt/reference/get_metadata_variables_annual.md) | 2024-25      | 2024-25     |             1 |   0.1.0 |
| [`get_metadata_monthly()`](https://bennettoxford.github.io/nhstt/reference/get_metadata_monthly.md)                   | 2025-07      | 2025-07     |             1 |   0.1.0 |
| [`get_metadata_providers()`](https://bennettoxford.github.io/nhstt/reference/get_metadata_providers.md)               | current      | current     |             1 |   0.1.0 |

## Time to download and tidy the data

Approximate download and processing times per period. Your times might
be a bit faster or slower depending on your internet and computer.

| Function                                                                                                                    | Download per period | Tidy per period | Total (all periods) |
|:----------------------------------------------------------------------------------------------------------------------------|--------------------:|----------------:|--------------------:|
| [`get_key_measures_annual()`](https://bennettoxford.github.io/nhstt/reference/get_key_measures_annual.md)                   |             1.4 sec |        17.1 sec |             2.5 min |
| [`get_proms_annual()`](https://bennettoxford.github.io/nhstt/reference/get_proms_annual.md)                                 |            0.63 sec |        58.5 sec |               3 min |
| [`get_activity_performance_monthly()`](https://bennettoxford.github.io/nhstt/reference/get_activity_performance_monthly.md) |               5 sec |        0.52 sec |             2.7 min |

## For developers

See
[DEVELOPERS.md](https://bennettoxford.github.io/nhstt/DEVELOPERS.md).

## Licence

### R package

The `nhstt` package is licensed under the [MIT
License](https://bennettoxford.github.io/nhstt/LICENSE.md).

### NHS Talking Therapies data

All NHS Talking Therapies data is Copyright NHS England and licensed
under the [Open Government Licence
v3.0](https://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/).
Contains public sector information licensed under the Open Government
Licence v3.0.

# Package index

## Annual data

- [`get_key_measures_annual()`](https://bennettoxford.github.io/nhstt/reference/get_key_measures_annual.md)
  : Get annual key performance measures
- [`get_proms_annual()`](https://bennettoxford.github.io/nhstt/reference/get_proms_annual.md)
  : Get annual Patient Reported Outcome measures (PROMs)

## Monthly data

- [`get_activity_performance_monthly()`](https://bennettoxford.github.io/nhstt/reference/get_activity_performance_monthly.md)
  : Get monthly activity and performance measures

## Metadata

- [`get_metadata_measures_annual()`](https://bennettoxford.github.io/nhstt/reference/get_metadata_measures_annual.md)
  : Get annual metadata for data measures
- [`get_metadata_variables_annual()`](https://bennettoxford.github.io/nhstt/reference/get_metadata_variables_annual.md)
  : Get annual metadata for variable derivations
- [`get_metadata_monthly()`](https://bennettoxford.github.io/nhstt/reference/get_metadata_monthly.md)
  : Get monthly metadata for NHS Talking Therapies measures
- [`get_metadata_providers()`](https://bennettoxford.github.io/nhstt/reference/get_metadata_providers.md)
  : Get provider organisation metadata from ODS

## Cache management

- [`cache_info()`](https://bennettoxford.github.io/nhstt/reference/cache_info.md)
  : Display cache information
- [`cache_clear()`](https://bennettoxford.github.io/nhstt/reference/cache_clear.md)
  : Clear cache

## Helper functions

- [`available_nhstt_reports()`](https://bennettoxford.github.io/nhstt/reference/available_nhstt_reports.md)
  : List available NHS Talking Therapies reports
- [`summarise_percentiles()`](https://bennettoxford.github.io/nhstt/reference/summarise_percentiles.md)
  : Calculate percentiles for a numeric variable

# Articles

### How-to guides

Step-by-step guides for analysing NHS TT data

- [How to use the monthly activity and performance
  data](https://bennettoxford.github.io/nhstt/articles/how-to-activity-performance-monthly.md):
- [How to use the annual key measures
  data](https://bennettoxford.github.io/nhstt/articles/how-to-key-measures-annual.md):
- [How to use the annual PROMs
  data](https://bennettoxford.github.io/nhstt/articles/how-to-proms-annual.md):

### Metadata

Metadata for annual and monthly reports

- [Metadata for annual key
  measures](https://bennettoxford.github.io/nhstt/articles/metadata-annual.md):
- [Core
  measures](https://bennettoxford.github.io/nhstt/articles/metadata-monthly-core.md):
- [Employment Advisor (EA)
  measures](https://bennettoxford.github.io/nhstt/articles/metadata-monthly-ea.md):
- [Long-term Condition
  measures](https://bennettoxford.github.io/nhstt/articles/metadata-monthly-ltc.md):
- [NHS Talking Therapies providers
  metadata](https://bennettoxford.github.io/nhstt/articles/metadata-ods.md):

### Reports

Reports based on monthly and annual NHS TT measures

- [Monthly treatment appointment
  measures](https://bennettoxford.github.io/nhstt/articles/report-monthly-tx-appt.md):
- [Monthly treatment outcome
  measures](https://bennettoxford.github.io/nhstt/articles/report-monthly-outcomes.md):
